<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Character Builder</title>

  <!-- GI·ªÆ NGUY√äN ƒê√öNG ƒê∆Ø·ªúNG D·∫™N CSS -->
  <link rel="stylesheet" href="/test/css/nini-theme.css" />
  <style>
    .wrap{max-width:1100px;margin:24px auto;padding:0 16px}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
    .views{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin-top:12px}
    .thumb{border:1px dashed var(--glass-bd,#e5e7eb);border-radius:12px;aspect-ratio:1/1;display:flex;align-items:center;justify-content:center;background:#fcfcfc}
    .thumb img{max-width:100%;max-height:100%;border-radius:10px}
    .row{display:flex;gap:12px;flex-wrap:wrap}
    pre{white-space:pre-wrap}
    /* form skin nh·∫π nh√†ng cho input trong .card */
    .card input[type="text"], .card input[type="number"],
    .card input[type="email"], .card input[type="password"],
    .card textarea, .card select{
      width:100%;padding:10px 12px;border-radius:12px;
      border:1px solid rgba(255,255,255,.28);
      background:rgba(255,255,255,.18);outline:none;
      transition:border-color .12s, box-shadow .12s, background .12s;
      box-shadow:0 4px 10px rgba(0,0,0,.06) inset;backdrop-filter:blur(6px)
    }
    .card textarea{min-height:120px;resize:vertical}
    .card input:focus,.card textarea:focus,.card select:focus{
      border-color:color-mix(in oklab, var(--brand) 55%, #fff 0%);
      box-shadow:0 0 0 3px color-mix(in oklab, var(--brand) 22%, transparent);
      background:rgba(255,255,255,.22)
    }
    .card label{display:block;font-weight:700;margin:8px 0 6px}
    .card{background:rgba(255,255,255,.22);border:1px solid rgba(255,255,255,.35);
      border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.18);
      backdrop-filter:blur(12px) saturate(140%);padding:18px}
  </style>
</head>
<body>
<div class="wrap">
  <h1>üß© Character Builder</h1>
  <p class="muted">T·∫°o nh√¢n v·∫≠t nh·∫•t qu√°n cho ·∫£nh/video. Sinh 4 view, l∆∞u Firebase, v√† xu·∫•t Character JSON ƒë·ªÉ g·∫Øn prompt.</p>

  <div class="grid">
    <!-- LEFT FORM -->
    <div class="card">
      <h3>Th√¥ng tin nh√¢n v·∫≠t</h3>

      <label>T√™n nh√¢n v·∫≠t
        <input id="charName" placeholder="VD: Daisy Girl" />
      </label>

      <label>M√¥ t·∫£ (character sheet)
        <textarea id="charSheet" placeholder="female, early 20s, heart-shaped face, big green eyes, long wavy light brown hair, daisy headband, denim top, white tiered skirt, gentle warm vibe"></textarea>
      </label>

      <div class="grid">
        <label>M√†u / palette
          <input id="palette" placeholder="pastel warm, latte brown" />
        </label>
        <label>Props (ph·ª• ki·ªán)
          <input id="props" placeholder="latte cup, umbrella" />
        </label>
      </div>

      <div class="grid">
        <label>Aspect
          <select id="aspect">
            <option value="1024x1024">1:1 (1024x1024)</option>
            <option value="1792x1024">16:9 (1792x1024)</option>
            <option value="1024x1792">9:16 (1024x1792)</option>
          </select>
        </label>
        <label>Seed (t√πy ch·ªçn)
          <input id="seed" type="number" placeholder="v√≠ d·ª•: 123456" />
        </label>
      </div>

      <div class="grid">
        <label>Style (phong c√°ch)
          <select id="style">
            <option value="3d_cinematic">3D cinematic, semi-realistic, soft GI</option>
            <option value="2d_painterly">2D painterly illustration, watercolor vibe</option>
            <option value="anime_modern">Modern anime film look, cel shading</option>
            <option value="pixar_inspired">Pixar-inspired stylized 3D</option>
            <option value="disney_like">Disney-like classic animation</option>
            <option value="comic">Comic book, bold ink, halftone</option>
          </select>
        </label>
        <label>Engine preview
          <select id="engine">
            <option value="none">Kh√¥ng preview (ch·ªâ JSON & l∆∞u)</option>
            <option value="openai">OpenAI Images (gpt-image-1)</option>
            <option value="sdwebui">Stable Diffusion WebUI (local)</option>
          </select>
        </label>
      </div>

      <div class="row" style="margin-top:8px">
        <button id="preview" class="ghost">üëÄ Preview (Front)</button>
        <button id="gen">üöÄ T·∫°o 4 view</button>
        <button id="save" class="ghost">üíæ L∆∞u Firebase</button>
        <button id="export" class="ghost">üì¶ Xu·∫•t Character JSON</button>
      </div>

      <p class="muted small">
        ‚Ä¢ OpenAI: ƒë·∫∑t key v√†o <code>localStorage.openai_key</code> ¬∑
        ‚Ä¢ SD WebUI: <code>http://127.0.0.1:7860</code> ¬∑
        ‚Ä¢ Firestore/Storage t·ª± t·∫°o collection/folder khi l∆∞u l·∫ßn ƒë·∫ßu.
      </p>
    </div>

    <!-- RIGHT PREVIEW -->
    <div class="card">
      <h3>Xem tr∆∞·ªõc (Front / Back / Left / Right)</h3>
      <div class="views">
        <div class="thumb" id="v-front">Front</div>
        <div class="thumb" id="v-back">Back</div>
        <div class="thumb" id="v-left">Left</div>
        <div class="thumb" id="v-right">Right</div>
      </div>
      <div class="row" style="margin-top:12px">
        <button id="clear" class="ghost">‚Ü∫ X√≥a preview</button>
      </div>
    </div>
  </div>

  <div class="card">
    <h3>K·∫øt qu·∫£ / Character Block</h3>
    <pre id="out"></pre>
  </div>
</div>

<!-- Auth wrapper c·ªßa b·∫°n (kh·ªüi t·∫°o app + Auth) -->
<script type="module" src="/test/js/nini-fb.mjs"></script>
<!-- Logic ri√™ng cho trang n√†y -->
<script type="module" src="/admin/tools/character.js"></script>
</body>
</html>
