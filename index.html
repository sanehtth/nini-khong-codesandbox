<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NiNi — Funny</title>

  <!-- ÉP tất cả đường dẫn tương đối về gốc site -->
  <base href="/" />

  <!-- CSS -->
  <link rel="stylesheet" href="/styles.css?v=3" />
  <!-- Favicon -->
  <link rel="icon" type="image/webp" href="/public/assets/icons/logonini.webp" />
</head>

<body>
  <!-- ============ HEADER ============ -->
  <header class="site-header">
    <div class="brand">
      <img class="brand__logo" src="/public/assets/icons/logo_text.webp" alt="NiNi Funny" />
      <div class="brand__slogan">Chơi mê ly, bứt phá tư duy</div>
    </div>

    <nav class="tabs" id="tabs">
      <button class="tab is-active" data-s="spring">Home</button>
      <button class="tab" data-s="spring">Spring</button>
      <button class="tab" data-s="summer">Summer</button>
      <button class="tab" data-s="autumn">Autumn</button>
      <button class="tab" data-s="winter">Winter</button>
    </nav>

    <a class="auth-btn" href="/login.html">Đăng nhập / Đăng ký</a>
  </header>

  <!-- ============ VIEWPORT 16:9 ============ -->
  <main class="viewport">
    <section class="frame">
      <div class="bg" id="bg"></div>

      <!-- Layer hiệu ứng rơi -->
      <div id="fx-stage"></div>

      <!-- Nhím -->
      <img id="nini" class="nini" src="/public/assets/icons/nini.webp" alt="NiNi" />

      <!-- Text -->
      <div class="hero">
        <h1>Chào mừng đến NiNi — Funny</h1>
        <p>Bé nhím sẽ đi qua lại để giới thiệu luật chơi, cách tích điểm và phần thưởng.</p>
      </div>

      <!-- Menu đáy -->
      <nav class="footer-menu">
        <a href="#intro">Giới thiệu</a>
        <a href="#rules">Luật chơi</a>
        <a href="#forum">Diễn đàn</a>
        <a href="/feedback/">Góp ý</a>
      </nav>
    </section>
  </main>

  <!-- JS hiệu ứng mùa (bắt buộc) -->
  <script defer src="/public/js/effects.js"></script>

  <!-- Script trang -->
  <script>
    // ==== Đường dẫn ảnh nền theo mùa (đổi cho khớp kho ảnh của bạn) ====
    const BGS = {
      home: "/public/assets/bg/nini_home.webp",
      spring: "/public/assets/images/seasons/spring.webp",
      summer: "/public/assets/images/seasons/summer.webp",
      autumn: "/public/assets/images/seasons/autumn.webp",
      winter: "/public/assets/images/seasons/winter.webp",
    };
    // Ảnh Nhím (nếu bạn dùng file khác đường dẫn, sửa ở đây)
    const NINI_IMG = "/public/assets/icons/nini.webp";

    // ==== DOM ====
    const bgEl = document.getElementById("bg");
    const tabs = document.getElementById("tabs");

    function updateTabs(season) {
      for (const b of tabs.querySelectorAll(".tab")) {
        b.classList.toggle("is-active", (b.dataset.s || "spring") === season);
      }
    }

    function setSeason(season) {
      // nền
      bgEl.style.backgroundImage = `url(${BGS[season] || BGS.spring})`;
      // FX rơi
      if (window.SEASON_FX) {
        window.SEASON_FX.unmount?.();
        window.SEASON_FX.mount("#fx-stage", {
          season,
          density: 120,   // số hạt: 80–200
          speed: 0.65     // tốc độ rơi: 0.4–1.0
        });
      }
      updateTabs(season);
    }

    // Click tabs
    tabs.addEventListener("click", (e) => {
      const btn = e.target.closest("[data-s]");
      if (!btn) return;
      setSeason(btn.dataset.s);
    });

    // Khởi tạo
    window.addEventListener("DOMContentLoaded", () => {
      // đảm bảo ảnh Nhím đúng
      const nini = document.getElementById("nini");
      if (nini && NINI_IMG) nini.src = NINI_IMG;

      // mùa mặc định
      setSeason("spring");
    });
  </script>
</body>
</html>

