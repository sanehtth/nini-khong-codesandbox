<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NiNi — Funny</title>
  <meta name="color-scheme" content="light">
  <!-- Favicon cơ bản -->
<link rel="icon" href="/favicon.ico" sizes="any">

<!-- PNG cho trình duyệt hiện đại -->
<link rel="icon" type="image/png" sizes="32x32" href="/public/assets/icons/logonini.webp">

<!-- iOS khi "Add to Home Screen" -->
<link rel="apple-touch-icon" sizes="180x180" href="/public/assets/icons/logonini.webp">

<!-- (tuỳ chọn) màu thanh địa chỉ trên mobile -->
<meta name="theme-color" content="#0c1624">

  <style>
    :root{
      --glass: rgba(255,255,255,.18);
      --glass-strong: rgba(255,255,255,.28);
      --ink: #0b1320;
      --ink-soft:#2a374f;
      --brand:#0ad47c;

      /* Tốc độ chạy của nhím (chậm hơn = số lớn hơn) */
      --hog-speed: 26s;
    }
<script>
(() => {
  const $ = s => document.querySelector(s);

  /* ======  Hiệu ứng rơi theo mùa  ====== */
  const canvas = $('#fx');
  if(!canvas){ console.warn('#fx not found'); return; }
  const ctx = canvas.getContext('2d');
  const dpr = Math.max(1, window.devicePixelRatio || 1);

  const SPRITES = {
    spring: '/public/assets/icons/flower.webp',
    summer: '/public/assets/icons/drop.webp',
    autumn: '/public/assets/icons/leaf.webp',
    winter: '/public/assets/icons/snow.webp',
  };
  const BG = {
    spring: 'url("/public/assets/images/seasons/spring.webp")',
    summer: 'url("/public/assets/images/seasons/summer.webp")',
    autumn: 'url("/public/assets/images/seasons/autumn.webp")',
    winter: 'url("/public/assets/images/seasons/winter.webp")',
    home  : 'url("/public/assets/bg/nini_home.webp")'
  };

  let W=0,H=0, prev=0, sprite=new Image(), particles=[];
  function resize(){
    const cs = getComputedStyle(canvas);
    canvas.width  = canvas.clientWidth  * dpr;
    canvas.height = canvas.clientHeight * dpr;
    ctx.setTransform(dpr,0,0,dpr,0,0);
    W = canvas.clientWidth;
    H = canvas.clientHeight;
  }
  window.addEventListener('resize', resize);

  function makeParticles(count=90){ // số lượng vừa phải
    particles.length = 0;
    for(let i=0;i<count;i++){
      particles.push({
        x: Math.random()*W,
        y: Math.random()*H,
        s: 0.7 + Math.random()*0.9,     // kích cỡ
        v: 12 + Math.random()*18,       // tốc độ rơi px/s (chậm)
        a: Math.random()*Math.PI*2,     // góc cho drift
      });
    }
  }

  function loop(ts){
    if(!prev) prev = ts;
    const dt = Math.min(0.033, (ts - prev)/1000); // frame ổn định
    prev = ts;

    ctx.clearRect(0,0,W,H);
    for(const p of particles){
      p.y += p.v * dt;
      p.a += 0.8*dt;
      p.x += Math.sin(p.a) * 12 * dt;  // drift nhẹ

      if(p.y > H + 20){ p.y = -20; p.x = Math.random()*W; }

      const size = 16 * p.s;
      ctx.drawImage(sprite, p.x - size/2, p.y - size/2, size, size);
    }
    requestAnimationFrame(loop);
  }

  function setSeason(season){
    const root = document.documentElement;
    const frame = document.querySelector('.frame') || document.body;
    if(BG[season]) frame.style.backgroundImage = BG[season];

    const url = SPRITES[season] || SPRITES.spring;
    if(sprite.src.endsWith(url) && particles.length) return;
    sprite = new Image();
    sprite.onload = () => { makeParticles(); };
    sprite.src = url;
  }

  // Gán click cho menu mùa (nếu có nút data-season)
  document.querySelectorAll('[data-season]').forEach(btn=>{
    btn.addEventListener('click', () => setSeason(btn.dataset.season));
  });

  /* ======  Nhím & Bong bóng “Giới thiệu / Luật chơi / …”  ====== */
  const hog = $('#hog');
  const bubble = $('#bubble');

  const TEXT = {
    intro:
      'Chào mừng bạn đến thế giới của mình. NiNi-Funny — chơi mê ly, bứt phá tư duy!!!' +
      ' Bạn có thể click bên dưới để tìm hiểu thêm nha, mình sẽ tiết lộ cho bạn một vài bí mật!',
    rules:
      'Đầu tiên bạn hãy đăng nhập và trở thành thành viên các câu lạc bộ.' +
      ' Đọc sách, xem video, chơi game để nhận kinh nghiệm và xu, sau đó đổi quà trong Shop nhé!',
    forum:
      'Khu sinh hoạt của các bạn nhỏ — chia sẻ câu chuyện, khoe thành tích và giúp đỡ nhau học tiếng Anh!',
    feedback:
      'Hãy gửi góp ý cho NiNi để mình làm app vui hơn và hữu ích hơn nhé!'
  };

  function speak(side, text){
    if(!hog || !bubble) return;
    // vị trí nhím
    hog.style.transition = 'left .8s ease, transform .8s ease';
    hog.style.left = (side==='left' ? '18%' : side==='right' ? '82%' : '50%');
    hog.style.transform = 'translateX(-50%)';
    // bong bóng
    bubble.textContent = text;
    bubble.hidden = false;
    bubble.style.opacity = 1;
    bubble.style.left  = (side==='left'  ? '26%' : side==='right' ? 'auto' : '50%');
    bubble.style.right = (side==='right' ? '26%' : 'auto');
  }

  $('#footer-intro')    && $('#footer-intro')   .addEventListener('click', ()=> speak('left',  TEXT.intro));
  $('#footer-rules')    && $('#footer-rules')   .addEventListener('click', ()=> speak('right', TEXT.rules));
  $('#footer-forum')    && $('#footer-forum')   .addEventListener('click', ()=> speak('left',  TEXT.forum));
  $('#footer-feedback') && $('#footer-feedback').addEventListener('click', ()=> speak('right', TEXT.feedback));

  // Khởi động
  resize();
  setSeason('home');     // hoặc 'spring' tuỳ trang
  makeParticles();
  requestAnimationFrame(loop);
})();
</script>
    /* Reset nhỏ */
    *{ box-sizing: border-box; }
    html,body{ height:100%; }
    html,body{ margin:0; }
    body{
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", sans-serif;
      color: var(--ink);
      background:#0c1624; /* nền sau letterbox */
    }
    a{ color: inherit; text-decoration: none; }
    .text-dim{ color:#6c7a92; }

    /* ===== Header ===== */
    header{
      position: fixed; inset: 0 0 auto 0;
      z-index: 30;
      height: 64px;
      display: grid;
      grid-template-columns: 1fr auto 1fr;
      align-items: center;
      padding: 8px 16px;
      background: linear-gradient(180deg, rgba(12,22,36,.8), rgba(12,22,36,.25), transparent);
      -webkit-backdrop-filter: blur(6px);
      backdrop-filter: blur(6px);
    }
    .brand{ display:flex; align-items:center; gap:10px; }
    .brand img{ height:28px; width:auto; display:block; }
    .slogan{ font-size:12px; color:#d7f9e9; opacity:.9;}

    nav .tabs{
      display:flex; gap:10px; padding:4px;
      background: rgba(255,255,255,.06);
      border-radius: 999px;
      align-items:center;
    }
    .tab{
      padding:8px 16px;
      border-radius: 999px;
      color:#f2f6ff;
      background: transparent;
      border:1px solid transparent;
      transition: .2s;
      font-weight:600;
      font-size:14px;
    }
    .tab:hover{ background: rgba(255,255,255,.1); }
    .tab.is-active{
      background: var(--glass-strong);
      border-color: rgba(255,255,255,.22);
      box-shadow: 0 4px 12px rgba(0,0,0,.15) inset;
    }

    .auth{
      justify-self:end; display:flex; gap:10px;
      color:#e9f4ff;
    }
    .auth a{
      padding:8px 14px; border-radius:999px;
      background: rgba(255,255,255,.12);
      border:1px solid rgba(255,255,255,.22);
    }

    /* ===== Letterbox 16:9 ===== */
    .viewport{
      min-height: 100svh;
      display:grid;
      place-items:center;
      padding-top:64px;      /* chừa header */
      padding-bottom:64px;   /* chừa footer */
    }
    .frame{
      position: relative;
      width: min(100vw, calc(100svh * 16 / 9));
      aspect-ratio: 16 / 9;
      overflow: hidden;
      border-radius: 12px;
      box-shadow: 0 12px 40px rgba(0,0,0,.35);
    }

    /* Nền khung 16:9 = 1 ảnh duy nhất theo mùa */
    .bg{
      position:absolute; inset:0;
      width:100%; height:100%;
      object-fit: cover;
      display:block;
      user-select:none; -webkit-user-drag: none;
    }

    /* Title + mô tả ở Home */
    .stage-copy{
      position:absolute; inset:3% 4% auto 4%;
      color:#f4fbff; text-shadow: 0 2px 18px rgba(0,0,0,.55);
    }
    .title{ margin:0 0 10px 0; font-size: clamp(20px, 2.4vw, 32px); }
    .subtitle{ margin:0; font-weight:600; }

    /* Nhím tỉ lệ theo khung (width theo % của .frame) */
    .hog{
      --w: 10%;           /* tăng/giảm để chỉnh to/nhỏ đồng bộ mọi thiết bị */
      position:absolute;
      bottom: 6%;
      left: 6%;
      width: var(--w);
      height:auto;
      filter: drop-shadow(0 6px 8px rgba(0,0,0,.25));
      animation: patrol var(--hog-speed) linear infinite alternate;
      /* để tránh bị bấm chọn */
      pointer-events: none; user-select: none; -webkit-user-drag: none;
    }
    @keyframes patrol{
      from{ left:6%; transform: translateX(0) }
      to  { left:94%; transform: translateX(-100%) }
    }

    /* ===== Footer (luôn dính đáy) ===== */
    footer{
      position: fixed; inset: auto 0 10px 0;
      z-index: 30;
      display:flex; justify-content:center;
      color:#e9f4ff;
      text-shadow:0 1px 8px rgba(0,0,0,.35);
    }
    .footer-links{
      display:flex; gap:18px; padding:8px 16px;
      border-radius:999px;
      background: rgba(0,0,0,.25);
      -webkit-backdrop-filter: blur(6px);
      backdrop-filter: blur(6px);
      border:1px solid rgba(255,255,255,.18);
      font-weight:600;
    }
    .footer-links a{ opacity:.9; }
    .footer-links a:hover{ opacity:1; text-decoration: underline; }

    /* Nút chuyển slide (giữa đáy khung) */
    .pager{
      position:absolute; inset:auto 0 10px 0;
      display:flex; justify-content:center; gap:10px;
      filter: drop-shadow(0 2px 10px rgba(0,0,0,.45));
    }
    .dot{
      width:10px; height:10px; border-radius:999px;
      background:rgba(255,255,255,.55);
      border:1px solid rgba(255,255,255,.7);
      opacity:.8;
    }
    .dot.is-active{ background:#fff; opacity:1; }

    /* Nhỏ xíu thêm cho mobile header gọn hơn */
    @media (max-width: 520px){
      .slogan{ display:none; }
      header{ height:58px; }
      .viewport{ padding-top:58px; padding-bottom:58px; }
      .hog{ --w: 12%; } /* cho mobile nhím hơi to hơn chút (vẫn theo % khung) */
    }
  </style>
</head>
<body class="is-home">
  <header>
    <div class="brand">
      <img src="public/assets/icons/logo_text.webp" alt="NiNi — Funny" />
      <div class="slogan">Chơi mê ly, bức phá tư duy</div>
    </div>

    <nav>
      <div class="tabs" id="tabs">
        <a href="#home"   class="tab is-active" data-page="home">Home</a>
        <a href="#spring" class="tab" data-page="spring">Spring</a>
        <a href="#summer" class="tab" data-page="summer">Summer</a>
        <a href="#autumn" class="tab" data-page="autumn">Autumn</a>
        <a href="#winter" class="tab" data-page="winter">Winter</a>
      </div>
    </nav>

    <div class="auth">
      <a href="/login.html" title="Đăng nhập / Đăng ký">Đăng nhập / Đăng ký</a>
    </div>
  </header>

  <main class="viewport">
    <div class="frame" id="stage">
      <img class="bg" id="bg" alt="">
      <!-- Copy Home (tuỳ chọn ẩn hiện theo trang) -->
      <section class="stage-copy" id="homeCopy">
        <h1 class="title">Chào mừng đến NiNi — Funny</h1>
        <p class="subtitle">
          Bé nhím sẽ đi qua lại để giới thiệu <strong>luật chơi</strong>, <strong>cách tích điểm</strong> và <strong>phần thưởng</strong>.
        </p>
      </section>

      <img class="hog" id="hog" src="public/assets/icons/nini.webp" alt="NiNi hedgehog">

      <!-- chấm trang nhỏ (nếu cần) -->
      <div class="pager">
        <span class="dot is-active" id="dot-home"></span>
        <span class="dot" id="dot-spring"></span>
        <span class="dot" id="dot-summer"></span>
        <span class="dot" id="dot-autumn"></span>
        <span class="dot" id="dot-winter"></span>
      </div>
    </div>
  </main>

  <footer>
    <div class="footer-links">
      <a href="#about">Giới thiệu</a>
      <span>·</span>
      <a href="#rules">Luật chơi</a>
      <span>·</span>
      <a href="#forum">Diễn đàn</a>
      <span>·</span>
      <a href="#feedback">Góp ý</a>
    </div>
  </footer>

  <script>
    // Bản đồ ảnh nền theo tab
    const BG = {
      home  : "public/assets/bg/nini_home.webp",
      spring: "public/assets/images/seasons/spring.webp",
      summer: "public/assets/images/seasons/summer.webp",
      autumn: "public/assets/images/seasons/autumn.webp",
      winter: "public/assets/images/seasons/winter.webp",
    };

    const tabs = document.querySelectorAll('.tab');
    const bg   = document.getElementById('bg');
    const homeCopy = document.getElementById('homeCopy');

    // dot nho
    const dots = {
      home  : document.getElementById('dot-home'),
      spring: document.getElementById('dot-spring'),
      summer: document.getElementById('dot-summer'),
      autumn: document.getElementById('dot-autumn'),
      winter: document.getElementById('dot-winter'),
    };

    // set trang theo hash
    function setPage(page){
      // tab active
      tabs.forEach(t=>{
        t.classList.toggle('is-active', t.dataset.page === page);
      });

      // đổi nền
      const url = BG[page] || BG.home;
      if(bg.getAttribute('src') !== url){
        bg.src = url;
      }

      // copy chỉ hiện ở home
      homeCopy.style.display = (page === 'home') ? 'block' : 'none';

      // dot nhỏ
      Object.entries(dots).forEach(([k,el])=>{
        el.classList.toggle('is-active', k === page);
      });
    }

    // click tabs
    tabs.forEach(t=>{
      t.addEventListener('click', (e)=>{
        const page = t.dataset.page;
        location.hash = page === 'home' ? '#home' : ('#' + page);
      });
    });

    // hash change
    function readHash(){
      const h = (location.hash || '#home').replace('#','');
      const page = ['home','spring','summer','autumn','winter'].includes(h) ? h : 'home';
      setPage(page);
    }
    window.addEventListener('hashchange', readHash);
    readHash();

    // preload ảnh cho mượt
    (['home','spring','summer','autumn','winter']).forEach(k=>{
      const i = new Image(); i.src = BG[k];
    });

    // (Tuỳ chọn) chỉnh tốc độ nhím runtime:
    // document.documentElement.style.setProperty('--hog-speed','30s');
  </script>
</body>
</html>


