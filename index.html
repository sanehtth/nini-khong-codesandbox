<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>NiNi — Funny</title>

  <!-- Favicon/logo -->
  <link rel="icon" type="image/webp" href="/public/assets/icons/logonini.webp"/>

  <!-- CSS chính -->
  <link rel="stylesheet" href="/styles.css?v=5"/>
</head>
<body>
  <!-- ===== HEADER ===== -->
  <header class="site-header">
    <div class="brand">
      <img class="brand__logo" src="/public/assets/icons/logo_text.webp" alt="NiNi Funny"/>
      <div class="brand__slogan">Chơi mê ly, bứt phá tư duy</div>
    </div>

    <nav class="tabs" id="tabs">
      <button class="tab" data-season="home">Home</button>
      <button class="tab" data-season="spring">Spring</button>
      <button class="tab" data-season="summer">Summer</button>
      <button class="tab" data-season="autumn">Autumn</button>
      <button class="tab" data-season="winter">Winter</button>
    </nav>

    <a class="auth-btn" href="/login.html">Đăng nhập / Đăng ký</a>
  </header>

  <!-- ===== KHUNG 16:9 ===== -->
  <section class="viewport">
    <div class="frame" id="frame">
      <!-- Ảnh nền theo mùa -->
      <img id="scene" alt="scene"
           src="/public/assets/images/seasons/spring.webp"/>

      <!-- Bé nhím -->
      <img id="nini" alt="NiNi"
           src="/public/assets/icons/nini.webp"/>

      <!-- 4 nút đáy -->
      <nav class="footer-nav" id="footerNav">
        <a class="pill" href="/about.html">Giới thiệu</a>
        <a class="pill" href="/rules.html">Luật chơi</a>
        <a class="pill" href="/forum.html">Diễn đàn</a>
        <a class="pill" href="/feedback.html">Góp ý</a>
      </nav>
    </div>
  </section>

  <!-- Hiệu ứng rơi -->
  <script src="/public/js/effects.js?v=2"></script>
  <script>
    // Ảnh nền theo mùa
    const BG = {
      home  : "/public/assets/bg/nini_home.webp",
      spring: "/public/assets/images/seasons/spring.webp",
      summer: "/public/assets/images/seasons/summer.webp",
      autumn: "/public/assets/images/seasons/autumn.webp",
      winter: "/public/assets/images/seasons/winter.webp",
    };

    const tabs  = document.getElementById('tabs');
    const scene = document.getElementById('scene');

    // Mặc định
    let current = 'spring';
    applySeason(current);

    tabs.querySelectorAll('.tab').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const s = btn.dataset.season || 'spring';
        current = (s === 'home') ? 'spring' : s; // Home = spring
        applySeason(current);
      });
    });

    function applySeason(season){
      scene.src = BG[season] || BG.spring;

      // Gọi hiệu ứng rơi nếu script đã load
      if (window.SEASON_FX && typeof SEASON_FX.mount === 'function') {
        SEASON_FX.mount('.frame', season);
      }

      // Active tab
      tabs.querySelectorAll('.tab')
          .forEach(b=>b.classList.toggle('is-active',
                    b.dataset.season === (season==='spring'?'home':season)));
    }
  </script>
</body>
</html>
