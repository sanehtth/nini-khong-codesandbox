<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NiNi — Funny</title>

  <!-- NOTE: favicon/logo ở tab trình duyệt (đổi nguồn ở đây) -->
  <link rel="icon" type="image/webp" href="public/assets/icons/logonini.webp" />

  <link rel="stylesheet" href="styles.css" />
</head>
  <!-- dùng đường dẫn tuyệt đối cho chắc ăn trên Netlify -->
<script src="/public/js/effects.js"></script>
<body class="season--home">
  <!-- ============ HEADER (Logo + slogan + menu mùa) ============ -->
  <header class="site-header">
    <div class="brand">
      <!-- NOTE: đổi logo ở đây -->
      <img class="brand__logo" src="public/assets/icons/logo_text.webp" alt="NiNi Logo" />
      <!-- NOTE: sửa slogan ở đây -->
      <div class="brand__text">
        <div class="brand__title">NiNi — Funny</div>
        <div class="brand__slogan">Chơi mê ly, bức phá tư duy</div>
      </div>
    </div>

    <!-- NOTE: thanh chọn mùa (đổi nhãn/đổi thứ tự tự do) -->
    <nav class="tabs" aria-label="Chọn mùa">
      <button class="tab is-active" data-tab="home">Home</button>
      <button class="tab" data-tab="spring">Spring</button>
      <button class="tab" data-tab="summer">Summer</button>
      <button class="tab" data-tab="autumn">Autumn</button>
      <button class="tab" data-tab="winter">Winter</button>

      <button id="authBtn" class="auth-btn">Đăng nhập / Đăng ký</button>
    </nav>
  </header>

  <!-- ============ VIEWPORT (căn giữa khung 16:9) ============ -->
  <main class="viewport">
    <!-- NOTE: .frame luôn giữ tỷ lệ 16:9 trong mọi màn hình -->
    <section class="frame" role="region" aria-label="Khu rừng NiNi">

      <!-- NOTE: Lớp hiệu ứng rơi (chỉ rơi trong khung 16:9) -->
      <div id="fx" aria-hidden="true"></div>

      <!-- NOTE: Nội dung chính nằm TRÊN hiệu ứng -->
      <div class="scene">
        <h1 class="headline">Chào mừng đến NiNi — Funny</h1>
        <p class="sub">
          Bé nhím sẽ đi qua lại để giới thiệu luật chơi, cách tích điểm và phần thưởng.
        </p>

        <!-- NOTE: Nhím (đổi kích cỡ trong CSS: --hog-scale) -->
        <figure class="hog" aria-label="Bé Nhím đang vẫy tay"></figure>
      </div>

      <!-- NOTE: Footer 4 mục (mở panel nội dung) -->
      <footer class="frame-footer">
        <button class="pill" data-panel="intro">Giới thiệu</button>
        <button class="pill" data-panel="rules">Luật chơi</button>
        <button class="pill" data-panel="forum">Diễn đàn</button>
        <button class="pill" data-panel="feedback">Góp ý</button>
      </footer>
    </section>
  </main>

  <!-- ============ PANEL (hộp nội dung trồi lên) ============ -->
  <aside id="panel" class="panel" hidden>
    <div class="panel__card">
      <button class="panel__close" aria-label="Đóng">&times;</button>
      <h2 class="panel__title"></h2>
      <div class="panel__body"></div>
    </div>
  </aside>

  <!-- ============ SCRIPTS ============ -->
  <script src="effects.js"></script>
  <script>
    /* ========== NOTE: JS điều phối UI đơn giản ========== */

    // Map nội dung 4 mục ở footer
    const CONTENT = {
      intro: `<p>Đây là chương trình trò chơi giúp ghi nhớ tiếng Anh một cách tự nhiên & linh hoạt.
      Bạn chỉ việc chơi hết mình — tiếng Anh sẽ “vào đầu” từ từ. Cố lên nhé! NiNi-Funny: Chơi mê ly, bức phá tư duy!</p>`,
      rules: `<p>Đầu tiên hãy đăng nhập & tham gia câu lạc bộ. Ở CLB, bạn tích được xu khi đọc sách,
      xem video và cả chơi game. Xem/Chơi càng nhiều, bạn càng nhận được điểm kinh nghiệm & xu để đổi quà ở Shop.</p>`,
      forum: `<p>Khu sinh hoạt của các bạn nhỏ — chia sẻ câu chuyện, khoe thành tích và giúp đỡ nhau học tiếng Anh!</p>`,
      feedback: `<p>Góp ý cho NiNi nhé! Bạn cần đăng nhập để gửi góp ý gồm nickname & nội dung, NiNi sẽ phản hồi sớm.</p>`
    };

    // Helper DOM
    const $ = (sel, root=document) => root.querySelector(sel);
    const $$ = (sel, root=document) => [...root.querySelectorAll(sel)];

    // 1) Chọn mùa
    $$('.tabs .tab').forEach(btn=>{
      btn.addEventListener('click', () => {
        $$('.tabs .tab').forEach(b=>b.classList.remove('is-active'));
        btn.classList.add('is-active');

        // set class mùa cho body để CSS đổi nền
        const season = btn.dataset.tab;
        document.body.className = `season--${season}`;

        // gọi hiệu ứng rơi theo mùa
        initSeasonFX(season);
      });
    });

    // 2) Panel 4 mục
    const panel = $('#panel');
    const title = $('.panel__title', panel);
    const body  = $('.panel__body', panel);
    const close = $('.panel__close', panel);

    close.addEventListener('click', ()=> panel.hidden = true);
    panel.addEventListener('click', e=>{
      if(e.target === panel) panel.hidden = true;
    });

    $$('.frame-footer .pill').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const key = btn.dataset.panel;
        title.textContent = btn.textContent;
        body.innerHTML = CONTENT[key] || '';
        panel.hidden = false;
      });
    });

    // 3) Khởi tạo mặc định
    // mặc định HOME -> hoa rơi nhẹ
    initSeasonFX('home');
  </script>
</body>
</html>

