<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NiNi — Funny</title>

  <!-- Favicon + Logo trên tab -->
  <link rel="icon" type="image/webp" href="/public/assets/icons/logonini.webp" />

  <!-- CSS chính -->
  <link rel="stylesheet" href="/styles.css?v=4" />
</head>
<body>
  <!-- ============ HEADER ============ -->
  <header class="site-header">
    <div class="brand">
      <img class="brand__logo" src="/public/assets/icons/logo_text.webp" alt="NiNi Funny"/>
      <div class="brand__slogan">Chơi mê ly, bứt phá tư duy</div>
    </div>

    <nav class="tabs" id="tabs">
      <button class="tab is-active" data-season="home">Home</button>
      <button class="tab" data-season="spring">Spring</button>
      <button class="tab" data-season="summer">Summer</button>
      <button class="tab" data-season="autumn">Autumn</button>
      <button class="tab" data-season="winter">Winter</button>
    </nav>

    <!-- Đăng nhập thường (Firebase) -->
    <a class="auth-btn" href="/login.html">Đăng nhập / Đăng ký</a>
  </header>

  <!-- ============ VIEWPORT (khung 16:9) ============ -->
  <main class="viewport">
    <section class="frame" id="viewport">
      <!-- nền mùa sẽ được JS đổi bằng CSS background-image -->
      <img class="nini" src="/public/assets/bg/nini_home.webp" alt="NiNi">
      <!-- cụm nút đáy -->
      <div class="footer-menu">
        <a href="/about.html">Giới thiệu</a>
        <span>•</span>
        <a href="/rules.html">Luật chơi</a>
        <span>•</span>
        <a href="/forum.html">Diễn đàn</a>
        <span>•</span>
        <a href="/feedback.html">Góp ý</a>
      </div>
    </section>
  </main>

  <!-- ============ CONFIG MÙA ============ -->
  <script>
    // 4 ảnh nền mùa ~ đường dẫn hiện tại của bạn
    window.SEASON_BG = {
      home  : "/public/assets/bg/nini_home.webp",  // có thể trùng spring nếu muốn
      spring: "/public/assets/images/seasons/spring.webp",
      summer: "/public/assets/images/seasons/summer.webp",
      autumn: "/public/assets/images/seasons/autumn.webp",
      winter: "/public/assets/images/seasons/winter.webp"
    };
  </script>

  <!-- FX (lá/hoa rơi) -->
  <script src="/public/js/effects.js?v=4"></script>
  <script>
    // Helper đổi mùa + set nền + bật/tắt hiệu ứng
    function applySeason(season) {
      const host = document.getElementById('viewport');
      const img = window.SEASON_BG[season] || window.SEASON_BG.spring;
      host.style.setProperty('--bg', `url("${img}")`);

      if (season === 'home') {
        // Home: tắt rơi cho “sạch”
        window.SeasonFX && SeasonFX.clear();
      } else {
        // Mùa khác: rơi thẳng xuống, tốc độ hợp lý
        window.SeasonFX && SeasonFX.play(season, { straightDown: true, speed: 1.0 });
      }

      // Active tab
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('is-active'));
      const btn = document.querySelector(`.tab[data-season="${season}"]`);
      if (btn) btn.classList.add('is-active');
    }

    // Tab click
    document.getElementById('tabs').addEventListener('click', (e) => {
      const btn = e.target.closest('.tab'); if (!btn) return;
      applySeason(btn.dataset.season);
    });

    // Khởi tạo
    applySeason('home'); // mở đầu ở Home
  </script>
</body>
</html>
