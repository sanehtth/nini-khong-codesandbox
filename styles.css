/* ===========================
   NiNi — Unified Stylesheet
   One source of truth for all pages
   =========================== */

/* ========== 1) Reset gọn ========== */
*,*::before,*::after{box-sizing:border-box}
html,body{height:100%}
body,h1,h2,h3,h4,p,figure,blockquote,dl,dd{margin:0}
ul[role="list"],ol[role="list"]{list-style:none;margin:0;padding:0}
img,svg,video,canvas,audio,iframe,embed,object{display:block;max-width:100%}
button,input,select,textarea{font:inherit;color:inherit}
a{text-decoration:none;color:inherit}

/* ========== 2) Tokens & theme ========== */
:root{
  /* brand */
  --brand-ink:#1c2024;          /* chữ chính */
  --brand-muted:#6b7b8c;        /* chữ mờ */
  --brand-green:#2f6e3f;        /* nhấn */
  --brand-green-2:#21512d;      /* nhấn đậm */
  /* glass */
  --glass-1: rgba(255,255,255,.15);
  --glass-2: rgba(255,255,255,.22);
  --glass-brd: rgba(255,255,255,.35);
  --glass-shadow: 0 12px 30px rgba(47,110,63,.25);
  --radius: 16px;
  /* bg */
  --bg-url: url("/public/assets/bg/nini_home.webp");
  --bg-overlay: rgba(255,255,255,.04);

  /* sizing */
  --wrap: min(1180px, 94vw);

  /* status */
  --ok:#0f5132;
  --bad:#7f1d1d;
}

/* ========== 3) Body & background ========== */
html{scroll-behavior:smooth}
body{
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
  color:var(--brand-ink);
  background:#0f1c11;
  min-height:100%;
  line-height:1.5;
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  position:relative;
}
body::before{
  content:""; position:fixed; inset:0;
  background:
    linear-gradient(to bottom, rgba(0,0,0,.15), rgba(0,0,0,.25)),
    var(--bg-url) center/cover no-repeat;
  z-index:-2;
  will-change:transform,opacity;
}
body::after{
  content:""; position:fixed; inset:0; background:var(--bg-overlay); z-index:-1;
}

/* Layout helpers */
.container{width:var(--wrap); margin-inline:auto}
.viewport{min-height:calc(100dvh - 100px)} /* phần dưới header */

/* Utilities */
.hidden,[hidden]{display:none!important}
.is-visually-hidden{position:absolute!important;clip:rect(0 0 0 0)!important;clip-path:inset(50%)!important;width:1px!important;height:1px!important;overflow:hidden!important}
.note{font-size:12px;color:var(--brand-muted)}
.note.ok{color:var(--ok)}
.note.bad{color:var(--bad)}

/* ========== 4) Header chung ========== */
.site-header{
  position:sticky; top:12px; z-index:50;
  display:flex; gap:16px; align-items:center;
  padding:10px 14px; width:var(--wrap); margin-inline:auto;
  border-radius:14px; backdrop-filter: blur(10px);
  background: var(--glass-1);
  border:1px solid var(--glass-brd);
  box-shadow: var(--glass-shadow);
}
.brand{display:flex; align-items:center; gap:10px}
.brand__logo{height:34px}
.brand__slogan{
  font-weight:700; letter-spacing:.2px; user-select:none;
  background: linear-gradient(90deg,#F5D36B,#47A768,#8a5a2b);
  -webkit-background-clip:text; background-clip:text; color:transparent;
  animation: hue 10s linear infinite;
}
@keyframes hue{to{filter:hue-rotate(360deg)}}
.tabs{display:flex; gap:10px; margin-left:auto}
.tab{
  padding:6px 12px; border-radius:999px; border:1px solid var(--glass-brd);
  background:var(--glass-1); color:var(--brand-ink);
  box-shadow:0 4px 10px rgba(47,110,63,.18); cursor:pointer
}
.tab.is-active{border-color:#fff; box-shadow:0 0 0 2px rgba(47,110,63,.25),0 10px 26px rgba(47,110,63,.35)}

/* Auth controls & admin link */
.auth-btn{
  padding:8px 12px; border-radius:999px; border:1px solid var(--glass-brd);
  background:var(--glass-2); margin-left:10px; cursor:pointer;
  box-shadow:0 4px 10px rgba(47,110,63,.18)
}
.admin-link{margin-left:6px; color:var(--brand-green-2); font-weight:700}

/* Avatar button (header) */
.avatar-btn img{width:32px;height:32px;border-radius:50%; border:1px solid rgba(255,255,255,.6); box-shadow:0 2px 10px rgba(0,0,0,.25)}

/* ========== 5) Buttons ========== */
.btn{
  display:inline-flex; align-items:center; justify-content:center; gap:8px;
  padding:8px 14px; border-radius:999px; border:1px solid var(--glass-brd);
  background:var(--glass-2); cursor:pointer; user-select:none;
  box-shadow:0 4px 10px rgba(47,110,63,.18);
  transition:transform .05s, box-shadow .2s, border-color .2s
}
.btn:hover{transform:translateY(-1px); box-shadow:0 8px 18px rgba(47,110,63,.28); border-color:#fff}
.btn:active{transform:none}
.btn.small{padding:6px 10px}
.btn.solid{background:linear-gradient(180deg,#ffffffb0,#ffffff88); border-color:#fff}
.btn.ghost{background:transparent}

/* ========== 6) Chips & line tabs ========== */
.chips{display:flex; gap:8px; margin-top:10px}
.chip{
  padding:6px 10px; border-radius:999px; border:1px dashed rgba(255,255,255,.45);
  background:transparent; cursor:pointer; color:var(--brand-ink)
}
.chip.is-active{border-style:solid; background:var(--glass-1)}
.tabs-line{display:flex; gap:8px; margin:6px 0 12px}
.tab-line{padding:8px 12px; border:none; border-bottom:2px solid transparent; background:transparent; cursor:pointer}
.tab-line.is-active{border-bottom-color:#fff; font-weight:700}

/* ========== 7) Glass cards & content blocks ========== */
.glass-card{
  background: var(--glass-1);
  border:1px solid var(--glass-brd);
  border-radius: var(--radius);
  box-shadow: var(--glass-shadow);
  backdrop-filter: blur(10px);
}
.content{width:var(--wrap); margin:16px auto; padding:14px; border-radius:var(--radius); background:var(--glass-1); border:1px solid var(--glass-brd); box-shadow:var(--glass-shadow)}
.frame{position:relative; width:var(--wrap); margin:10px auto}

/* ========== 8) Forms ========== */
.form{display:block}
.form .row{display:flex; gap:10px; align-items:center; margin:8px 0; flex-wrap:wrap}
.input{
  width:100%; min-width:260px; padding:10px 8px;
  background:transparent; border:none; border-bottom:2px solid rgba(255,255,255,.55);
  outline:none; color:var(--brand-ink)
}
.input:focus{border-bottom-color:#9fc5b0; box-shadow:0 4px 0 -2px rgba(47,110,63,.25) inset}
.input.underline{min-width:260px}

/* ========== 9) Modal (auth + reader dùng chung) ========== */
.modal{position:fixed; inset:0; display:grid; place-items:center; z-index:60}
.modal[aria-hidden="true"]{display:none}
.modal__backdrop{position:absolute; inset:0; background:rgba(0,0,0,.35); backdrop-filter:blur(2px)}
.modal__panel{
  position:relative; width:min(680px, 94vw); padding:16px; border-radius:16px;
  background:var(--glass-1); border:1px solid var(--glass-brd); box-shadow:var(--glass-shadow)
}
.modal__head{display:flex; align-items:center; justify-content:space-between; gap:10px}
.modal__title{margin:0; font-size:18px}
.modal__close{border:0; background:transparent; font-size:20px; cursor:pointer}

/* ========== 10) Shelf (storybook) ========== */
.shelf-card{margin-top:10px}
.shelf{display:block; padding:12px}
.shelf__title{margin:0 0 10px 4px; font-weight:800}
.shelf__grid{display:grid; grid-template-columns: repeat(auto-fill,minmax(220px,1fr)); gap:12px}
.book-card{cursor:pointer; border-radius:12px; overflow:hidden; border:1px solid rgba(255,255,255,.25); background:rgba(255,255,255,.12)}
.book-card__cover{aspect-ratio: 4/3; object-fit:cover; width:100%}
.book-card__body{padding:10px}
.book-card__title{margin:0 0 4px; font-size:15px; font-weight:700}
.book-card__meta{font-size:12px; color:var(--brand-muted)}

/* ========== 11) Reader modal (calendar) ========== */
.reader__panel{width:min(980px, 96vw)}
.reader__head{margin:0 0 8px}
.reader__title{margin:0}
.calendar{position:relative; aspect-ratio:16/9; border-radius:12px; overflow:hidden; border:1px solid rgba(255,255,255,.25)}
.calendar__bg{position:absolute; inset:0; background:#000 center/cover no-repeat; transition:opacity .2s}
.calendar.is-loading .calendar__bg{opacity:.6}
.calendar__spinner{position:absolute; inset:auto 12px 12px auto; width:20px; height:20px; border-radius:50%; border:3px solid #fff8; border-top-color:transparent; animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.reader__toolbar{display:flex; align-items:center; justify-content:space-between; padding-top:8px}
.reader__nav{display:flex; gap:8px}
.reader__lang{display:flex; gap:8px}
.reader__subtitle{margin-top:8px; min-height:1.6em; font-size:14px}

/* ========== 12) Profile (cards, KPI, avatar) ========== */
.page-wrap{width:var(--wrap); margin:18px auto 32px; display:grid; gap:16px; grid-template-columns: 1.2fr .8fr}
.card{background:var(--glass-1); border:1px solid var(--glass-brd); border-radius:16px; padding:16px; color:var(--brand-ink); box-shadow:var(--glass-shadow)}
.card h2{margin:0 0 10px; font-size:20px}
.meta{font-size:13px; color:var(--brand-muted); margin:-2px 0 12px}
.grid-2{display:grid; grid-template-columns: 140px 1fr; gap:14px; align-items:start}
.fld{display:grid; grid-template-columns: 180px 1fr; align-items:center; gap:10px; margin:8px 0}
.fld>span{color:var(--brand-muted); font-size:14px}
.row{display:flex; gap:10px; margin-top:12px; align-items:center; flex-wrap:wrap}

.avatar-wrap{display:flex; gap:14px; align-items:center}
.avatar{width:96px;height:96px;border-radius:50%;border:1px solid rgba(17,24,39,.15);object-fit:cover;background:#fff; box-shadow:0 2px 10px rgba(17,24,39,.08)}

.kpi{display:grid; grid-template-columns: repeat(3, 1fr); gap:10px; margin:8px 0 10px}
.kpi .tile{background: rgba(255,255,255,.18); border:1px solid rgba(17,24,39,.12); border-radius:12px; padding:12px; text-align:center}
.kpi .tile h3{margin:0; font-size:13px; color:var(--brand-muted)}
.kpi .tile .val{font-size:22px; font-weight:800; margin-top:4px}
.bar{height:8px; background:rgba(17,24,39,.12); border-radius:999px; overflow:hidden}
.bar>i{display:block; height:100%; background:linear-gradient(90deg,#ffd44d,#7bd86a,#4fb1ff,#b88752)}

.pw-card{margin-top:14px; background:rgba(255,255,255,.14); border:1px solid rgba(17,24,39,.12); border-radius:12px; padding:12px}
.pw-card h3{margin:0 0 8px; font-size:16px}

/* Avatar shop overlay (profile) */
.avatar-shop{position:fixed; inset:0; display:grid; place-items:center; z-index:55}
.avatar-shop[hidden]{display:none}
.avatar-shop__panel{width:min(820px, 96vw)}
.avatar-grid{display:grid; grid-template-columns: repeat(auto-fill,minmax(220px,1fr)); gap:12px}
.avatar-card{border:1px solid rgba(255,255,255,.25); border-radius:12px; overflow:hidden; background:rgba(255,255,255,.12)}
.avatar-card__img{aspect-ratio:1/1; object-fit:cover; width:100%}
.avatar-card__body{padding:10px; display:grid; gap:6px}
.badge{font-size:11px; padding:2px 6px; border-radius:6px; background:rgba(0,0,0,.2); color:#fff}

/* ========== 13) Admin styles ========== */
.admin-tabs{display:flex; gap:10px; flex-wrap:wrap}
.admin-tab{appearance:none; border:1px solid var(--glass-brd); background:var(--glass-1); color:var(--brand-ink); border-radius:999px; padding:8px 14px; cursor:pointer; box-shadow:0 4px 10px rgba(47,110,63,.18)}
.admin-tab.is-active{box-shadow:0 0 0 2px rgba(47,110,63,.25),0 10px 26px rgba(47,110,63,.35); border-color:#fff}
.shell{width:var(--wrap); margin:18px auto 90px}
.panel{display:none; margin-top:14px}
.panel.is-current{display:block}
.panel .toolbar{display:flex; gap:10px; align-items:center; flex-wrap:wrap; padding:14px}
.table-wrap{overflow:auto; border-radius:0 0 var(--radius) var(--radius)}
table{width:100%; border-collapse:collapse; color:var(--brand-ink)}
thead tr{background:rgba(255,255,255,.25)}
th,td{padding:10px 12px; border-bottom:1px solid rgba(255,255,255,.25); text-align:left}
tbody tr:hover{background:rgba(255,255,255,.08)}

/* ========== 14) Responsive tweaks ========== */
@media (max-width: 920px){
  .tabs{order:3; width:100%; justify-content:center}
  .site-header{flex-wrap:wrap}
  .page-wrap{grid-template-columns:1fr}
  .grid-2{grid-template-columns:1fr}
  .fld{grid-template-columns:1fr}
}
/* ====== BRAND: logo + slogan trên header ====== */
.brand{display:flex;align-items:center;gap:10px}
.brand__logo{height:34px;width:auto;display:block}
.brand__slogan{
  font-weight:700; letter-spacing:.2px; user-select:none;
  background:linear-gradient(90deg,#F5D36B,#47A768,#8a5a2b);
  -webkit-background-clip:text; background-clip:text; color:transparent;
  animation:brandHue 10s linear infinite;
}
@keyframes brandHue{to{filter:hue-rotate(360deg)}}

/* ====== LOGO “tiêu đề” gắn cạnh H1/H2/H3 trong các page nhỏ ====== */
.logo-title{height:22px;width:auto;vertical-align:-4px;margin-right:6px;display:inline-block}
.logo-title--sm{height:18px;vertical-align:-3px}
.logo-title--lg{height:28px;vertical-align:-6px}

/* ====== BACKGROUND dùng chung (2 cách áp) ======
   C1) Toàn site: body::before đã nhận --bg-url (có sẵn ở file unified)
   C2) Theo khối cụ thể: thêm class .bg-cover hoặc data-bg="nini"
*/
.bg-cover,[data-bg="nini"]{
  background: var(--bg-url) center/cover no-repeat;
  position:relative;
}
.bg-cover::after,[data-bg="nini"]::after{
  content:"";position:absolute;inset:0;background:rgba(255,255,255,.04);pointer-events:none
}

/* Khối hero cho các trang nhỏ (auth-action/reset/recover/profile/admin) */
.page-hero{
  min-height:calc(100dvh - 80px);
  display:grid; place-items:center;
  width:var(--wrap); margin:0 auto;
}

/* Khung kính mờ cho panel trung tâm trên nền */
.panel-glass{
  width:min(680px,94vw);
  background:var(--glass-1);
  border:1px solid var(--glass-brd);
  border-radius:16px;
  box-shadow:var(--glass-shadow);
  backdrop-filter:blur(10px);
  padding:16px;
}

/* ===== Layout chung cho toàn site ===== */
:root{
  --shell: 1180px;                 /* bề rộng tối đa của khung nội dung */
  --frame-h: clamp(520px, 62vh, 720px); /* chiều cao khung hero trên index */
  --bg-url: url('/public/assets/bg/nini_home.webp'); /* nền mặc định */
}

/* nền toàn trang (dùng được cho các trang auth/profile/admin) */
body{
  background-image: var(--bg-url);
  background-size: cover;
  background-position: center;
  background-attachment: fixed;
}

/* khối chứa nội dung chuẩn */
.viewport{ width:min(var(--shell),94vw); margin:14px auto 80px; }

/* khung hero (index – nơi hiển thị storybook/hoa) */
.frame{
  position: relative;
  width: 100%;
  height: var(--frame-h);
  border-radius: 18px;
  overflow: hidden;
  background-size: cover;
  background-position: center 72%; /* thấy nhiều thảm hoa */
}

/* chip nổi trên khung */
.chips{ position: relative; z-index: 4; }

/* kệ sách nằm trong khung */
#shelfMount.shelf-card{
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  bottom: clamp(48px, 10vh, 110px);
  width: min(980px, calc(100% - 80px));
  margin: 0;
  z-index: 3;
}

/* khối văn bản dưới khung */
.content{ width:min(var(--shell),94vw); margin:14px auto 0; position:relative; z-index:1; }

/* auth ở header */
.auth-area{ display:flex; gap:10px; align-items:center }
.avatar-btn img{ width:32px; height:32px; border-radius:50% }

/* ẩn hoàn toàn nút Admin khi toggle */
.admin-link.is-hidden{ display:none !important; }

