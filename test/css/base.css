/* =======================================================================
   NiNi — base.css (CLEAN)
   - Gộp style header cơ bản + brand/slogan + avatar default
   - Toggle giao diện theo trạng thái đăng nhập (guest/auth)
   - Ẩn logo/brand/auth legacy để chỉ còn 1 header
   - Khôi phục background + theme “glass”
   ======================================================================= */

/* --------- Variables chung --------- */
:root{
  /* màu chữ & kính */
  --ink: #233;
  --glass: #ffffffaa;
  --glass-bd: #ffffff55;
  --pill: #f5f5f5cc;

  /* brand (paths chuẩn) */
  --brand-logo-left-url: url("/public/assets/icons/logo_text.webp");
  --brand-slogan: "chơi mê ly, bứt phá tư duy";
  --brand-slogan-color: #fff;
  --brand-slogan-size: 12.5px;
  --brand-logo-left-w: 112px;
  --brand-logo-left-h: 28px;

  /* avatar default */
  --avatar-default-url: url("/public/assets/avatar/NV.webp");

  /* theme glass */
  --glass-1: rgba(255,255,255,.15);
  --glass-2: rgba(255,255,255,.35);
  --glass-bd-2: rgba(255,255,255,.45);
  --blur: 8px;

  /* button & input */
  --btn-text: #fff;
  --btn-bd: rgba(255,255,255,.65);
  --btn-hover: #f6d35c;        /* vàng khi hover (chữ + viền) */
  --btn-active-bg: #2ecc71;    /* xanh lá nhạt khi chọn */
  --btn-focus: rgba(255,255,255,.75);

  --line: rgba(255,255,255,.65);
  --line-hover: #f6d35c;
  --line-focus: #2ecc71;
}

/* --------- Reset nhẹ --------- */
*{ box-sizing: border-box; }
html,body{ margin:0; padding:0; color:var(--ink); font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; }
a{ color:inherit; text-decoration:none; }

/* --------- Stage & card --------- */
.stage{ max-width:1100px; margin:18px auto; padding:12px; position:relative; }
.stage > .glass{
  background: var(--glass-1);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  border:1px solid var(--glass-bd);
  border-radius:16px;
  padding:18px;
}

/* đưa soft-tabs xuống dưới card, căn giữa */
.stage > .glass{ margin-bottom:56px; }
.stage > .glass .soft-tabs{
  position:absolute; left:50%; transform:translateX(-50%); bottom:-42px;
}
.soft-tabs{ display:flex; gap:8px; justify-content:center; }
.soft-tabs .chip{
  display:inline-flex; align-items:center; gap:.4rem;
  padding:6px 10px; border-radius:9999px;
  background: rgba(255,255,255,.10);
  border:1px solid var(--glass-bd);
  color:#fff;
}
.soft-tabs .chip.is-active{ background:var(--btn-active-bg); border-color:transparent; }

/* Footer đơn giản */
.footer{ max-width:1100px; margin:24px auto; padding:12px; text-align:center; opacity:.9; }

/* =======================================================================
   HEADER (chỉ 1 phiên bản — đã loại bỏ bản trùng)
   ======================================================================= */

#nini_header{ padding:10px 16px; }
#nini_header .nini-header-wrap{
  position: sticky; top:0; z-index:30;
  display:grid; grid-template-columns:1fr auto auto; gap:12px; align-items:center;
  max-width:1120px; margin:0 auto; padding:8px 12px;
  background: rgba(0,0,0,.22);
  -webkit-backdrop-filter: blur(6px); backdrop-filter: blur(6px);
  border-radius:14px;
}
#nini_header .brand{ display:flex; align-items:center; gap:8px; font-weight:700; color:#fff; }
#nini_header .logo{
  width:56px; height:28px; display:inline-block;
  background: url('/public/assets/icons/logo_text.webp') left center/contain no-repeat;
}
#nini_header .slogan{ font-size:.92rem; opacity:.85; color:#fff; text-shadow:0 1px 2px rgba(0,0,0,.55); }
#nini_header .nav{ display:flex; gap:10px; }
#nini_header .nav-link{ color:#fff; }
#nini_header .nav-link:hover{ color:var(--btn-hover); }

/* user box */
#nini_header .userbox{ display:flex; align-items:center; gap:10px; justify-self:end; }
#nini_header .user-info{ display:inline-flex; align-items:center; gap:10px; }
#nini_header .nick{ color:#fff; text-shadow:0 1px 2px rgba(0,0,0,.55); }

/* avatar (chữ cái hoặc ảnh) */
#nini_header .avatar{
  --size:28px;
  width:var(--size); height:var(--size); border-radius:999px; position:relative;
  background: var(--ava-bg, #2e7d32) center/cover no-repeat;
  border:1px solid rgba(255,255,255,.6); cursor:pointer;
}
#nini_header .avatar::after{
  content:attr(data-letter);
  position:absolute; inset:0; display:flex; align-items:center; justify-content:center;
  color:#fff; font-weight:700; text-shadow:0 1px 1px rgba(0,0,0,.35);
}

/* auth buttons */
#nini_header .btn-auth{
  display:inline-flex; align-items:center; gap:.5rem; padding:8px 12px;
  border-radius:999px; background:transparent; color:#fff;
  border:1px solid var(--btn-bd); cursor:pointer; transition:.2s;
}
#nini_header .btn-auth:hover{ color:var(--btn-hover); border-color:var(--btn-hover); }

/* Toggle theo trạng thái đăng nhập (set bởi header.js) */
.guest-only{ display:inline-flex; }
.auth-only { display:none; }
body[data-auth="in"] .guest-only{ display:none !important; }
body[data-auth="in"] .auth-only { display:inline-flex !important; }

/* Ẩn toàn bộ logo/brand/auth legacy ngoài header */
#nini_header .site-brand .title-logo{ display:none !important; }
#nini_header .brand,.nini-badge,.logo-small,.header-logo,.header__logo{ display:inherit; }
.left-logo,.site-logo,.top-left-logo,
body > .btn-auth:not(#nini_header *),
body > .avatar:not(#nini_header *),
body > .user-info:not(#nini_header *),
body > .btn-login, body > .btn-logout, body > #btnLogout,
body > .login, body > .logout, body > .auth-controls, body > .auth-box{
  display:none !important;
}

/* =======================================================================
   THEME GLASS + BUTTON + INPUT
   ======================================================================= */
.glass{
  background: var(--glass-1);
  backdrop-filter: blur(var(--blur));
  -webkit-backdrop-filter: blur(var(--blur));
  border:1px solid var(--glass-bd-2);
  border-radius:16px;
}
.glass-2{
  background: var(--glass-2);
  backdrop-filter: blur(var(--blur));
  -webkit-backdrop-filter: blur(var(--blur));
  border:1px solid var(--glass-bd-2);
  border-radius:16px;
}
.message{ padding:12px 14px; border-radius:12px; }
.message.glass-2{ box-shadow:0 8px 24px rgba(0,0,0,.08); }

/* button — viền trắng, chữ trắng; hover vàng; active xanh lá */
.btn{
  display:inline-flex; align-items:center; justify-content:center;
  gap:.5rem; padding:8px 14px; border-radius:999px;
  background:transparent; color:var(--btn-text);
  border:1px solid var(--btn-bd); cursor:pointer; transition:.2s;
}
.btn:hover{ color:var(--btn-hover); border-color:var(--btn-hover); background:rgba(255,255,255,.06); }
.btn:focus-visible{ outline:none; box-shadow:0 0 0 3px rgba(255,255,255,.25); border-color:var(--btn-focus); }
.btn.is-active,[aria-current="true"],[aria-pressed="true"]{ background:var(--btn-active-bg); color:#fff; border-color:transparent; }
.btn.sm{ padding:6px 10px; font-size:.92rem; }
.btn.xs{ padding:4px 8px; font-size:.85rem; }

/* input — trong suốt, 1 line dưới */
.input, input[type="text"], input[type="email"], input[type="password"],
input[type="tel"], input[type="number"], textarea, select{
  background:transparent; color:#fff; border:none;
  border-bottom:1px solid var(--line); padding:8px 2px 6px; border-radius:0;
  outline:none; width:100%; transition:border-color .2s, box-shadow .2s;
}
.input::placeholder, input::placeholder, textarea::placeholder{ color:rgba(255,255,255,.75); }
.input:hover, input:hover, textarea:hover, select:hover{ border-bottom-color:var(--line-hover); }
.input:focus, input:focus, textarea:focus, select:focus{
  border-bottom-color:var(--line-focus); box-shadow:0 2px 0 0 var(--line-focus);
}
.field{ display:flex; flex-direction:column; gap:6px; }
.label{ color:#fff; opacity:.9; font-size:.92rem; }

/* chữ trong các khối kính hiển thị trắng */
.glass, .glass-2{ color:#fff; }
.glass a, .glass-2 a{ color:#fff; text-decoration:underline; text-underline-offset:2px; }

/* =======================================================================
   BACKGROUND THEME
   ======================================================================= */
body.home{
  background: url("/public/assets/bg/nini_home.webp") center top/cover fixed no-repeat;
}
@media (max-width:900px){
  body.home{ background-attachment:scroll; background-size:cover; }
}

/* Ẩn hẳn soft-tabs bản cũ trong hero-card nếu từng render */
.stage .soft-tabs,
.stage .glass .soft-tabs,
.card .soft-tabs{ /* giữ bản dưới footer, ẩn bản trong hero */
  /* nếu bạn đã chuyển xuống footer rồi thì bật dòng dưới */
  /* display:none !important; */
}

/* Overlay / modal flags */
.auth-modal.hidden{ display:none; }
.body-auth-open{ overflow:hidden; }
